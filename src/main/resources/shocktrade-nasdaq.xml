<?xml version="1.0" ?>
<narrative-config version="1.0">
    <!-- Narratives -->

    <narrative id="CombiningNarrative" class="com.shocktrade.datacenter.narratives.CombiningNarrative">
        <properties />
    </narrative>

    <narrative id="EodDataImportNarrative"
               class="com.shocktrade.datacenter.narratives.EodDataImportNarrative">
        <properties>
            <property key="kafka.topic">eoddata.transhistory.avro</property>
            <property key="zookeeper.connect">dev801:2181</property>
        </properties>
    </narrative>

    <narrative id="OTCBBDailyUpdateNarrative" class="com.shocktrade.datacenter.narratives.OTCBBDailyUpdateNarrative">
        <properties>
            <property key="kafka.topic">otcbb.transactions.avro</property>
            <property key="zookeeper.connect">dev801:2181</property>
        </properties>
    </narrative>

    <!-- Location Triggers -->

    <location id="Combiner" path="/Users/ldaniels/broadway/incoming/combine">
        <feed name="AMEX_(.*)[.]txt" match="regex" narrative-ref="CombiningNarrative"/>
        <feed name="NASDAQ_(.*)[.]txt" match="regex" narrative-ref="CombiningNarrative"/>
        <feed name="NYSE_(.*)[.]txt" match="regex" narrative-ref="CombiningNarrative"/>
        <feed name="OTCBB_(.*)[.]txt" match="regex" narrative-ref="CombiningNarrative"/>
    </location>

    <location id="EodData" path="/Users/ldaniels/broadway/incoming/tradingHistory">
        <feed name="AMEX_(.*)[.]txt" match="regex" narrative-ref="EodDataImportNarrative"/>
        <feed name="NASDAQ_(.*)[.]txt" match="regex" narrative-ref="EodDataImportNarrative"/>
        <feed name="NYSE_(.*)[.]txt" match="regex" narrative-ref="EodDataImportNarrative"/>
        <feed name="OTCBB_(.*)[.]txt" match="regex" narrative-ref="EodDataImportNarrative"/>
    </location>

    <!--
    http://otce.finra.org/MSHistoricalDataMonthly/DownloadFileStream?fileLocation=D:\OTCE\DownloadFiles\HistoricalData\BB01202015.txt
    http://otce.finra.org/RegSHO/DownloadFileStream?fileLocation=D:\OTCE\DownloadFiles\SHO\otc-thresh20150121_201501212258.txt
    -->
    <location id="OTCTranHistory"
              path="http://otce.finra.org/MSHistoricalDataMonthly/DownloadFileStream?fileLocation=D:\\OTCE\DownloadFiles\\HistoricalData\\">
        <!-- BB{{ date:MMddyyyy }}.txt => BB01202015.txt-->
        <feed match="exact" name="OtherOTC_122014.txt" narrative-ref="OTCBBDailyUpdateNarrative"/>
    </location>

</narrative-config>